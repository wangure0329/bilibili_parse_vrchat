# åˆªé™¤æœ‰äº‚ç¢¼çš„ Git Commit

## ğŸ” æŸ¥çœ‹æœ‰äº‚ç¢¼çš„æäº¤

```bash
git log --oneline -10
```

## æ–¹æ³•ä¸€ï¼šä½¿ç”¨ git rebase -iï¼ˆæ¨è–¦ï¼Œå¯é¸æ“‡æ€§åˆªé™¤ï¼‰

```bash
# 1. å•Ÿå‹•äº¤äº’å¼ rebaseï¼ˆä¿®æ”¹æœ€è¿‘ 10 å€‹æäº¤ï¼‰
git rebase -i HEAD~10

# 2. åœ¨ç·¨è¼¯å™¨ä¸­ï¼Œæ‰¾åˆ°è¦åˆªé™¤çš„æäº¤ï¼Œå°‡ 'pick' æ”¹ç‚º 'drop' æˆ–ç›´æ¥åˆªé™¤è©²è¡Œ
# ä¾‹å¦‚ï¼š
# pick 6d1e5fe add docker cleanup guide
# drop f40fc28 çå›¨å¢éˆå¤‰è…‘é‚å›§æŒ…éŸâ€³æ€€...
# pick 661a3e5 ç»‰å©šæ« b23.tv...
# drop e666f5f æ·‡äº¬ b23.tv...

# 3. ä¿å­˜ä¸¦é€€å‡ºï¼ŒGit æœƒè‡ªå‹•åˆªé™¤é€™äº›æäº¤
```

## æ–¹æ³•äºŒï¼šä½¿ç”¨ git resetï¼ˆå›é€€åˆ°æŸå€‹æäº¤é»ï¼‰

```bash
# 1. æ‰¾åˆ°æœ€å¾Œä¸€å€‹å¥½çš„æäº¤ï¼ˆæ²’æœ‰äº‚ç¢¼çš„ï¼‰
# ä¾‹å¦‚ï¼š6298cc6 add dynamic year update

# 2. è»Ÿé‡ç½®ï¼ˆä¿ç•™æ–‡ä»¶æ›´æ”¹ï¼‰
git reset --soft 6298cc6

# 3. æˆ–ç¡¬é‡ç½®ï¼ˆä¸Ÿæ£„æ‰€æœ‰æ›´æ”¹ï¼‰
git reset --hard 6298cc6

# 4. é‡æ–°æäº¤ï¼ˆä½¿ç”¨æ­£ç¢ºçš„è¨Šæ¯ï¼‰
echo "æ­£ç¢ºçš„ commit è¨Šæ¯" > msg.txt
git commit -F msg.txt
```

## æ–¹æ³•ä¸‰ï¼šåˆªé™¤ç‰¹å®šæäº¤ï¼ˆä½¿ç”¨ git rebaseï¼‰

```bash
# åˆªé™¤å–®å€‹æäº¤ï¼ˆä¾‹å¦‚ f40fc28ï¼‰
git rebase --onto f40fc28^ f40fc28

# æˆ–ä½¿ç”¨äº¤äº’å¼æ–¹å¼
git rebase -i f40fc28^
# ç„¶å¾Œåˆªé™¤æˆ–æ¨™è¨˜ç‚º drop
```

## ğŸ“‹ ç•¶å‰æœ‰äº‚ç¢¼çš„æäº¤

æ ¹æ“š `git log` è¼¸å‡ºï¼Œä»¥ä¸‹æäº¤æœ‰äº‚ç¢¼ï¼š

- `f40fc28` - "çå›¨å¢éˆå¤‰è…‘é‚å›§æŒ…éŸâ€³æ€€..." (æ‡‰è©²æ˜¯ï¼šå°‡æ‰€æœ‰ä¸­æ–‡å’–å•¡å»³æ”¹æˆæ –éš™å±…æ‰€...)
- `661a3e5` - "ç»‰å©šæ« b23.tv é­â‚¬â‚¬ï½‡ç¥¼..." (æ‡‰è©²æ˜¯ï¼šç§»é™¤ b23.tv çŸ­é€£çµ...)
- `e666f5f` - "æ·‡äº¬ b23.tv å§ï½…å¢–ç›..." (æ‡‰è©²æ˜¯ï¼šä¿®å¾© b23.tv æ­£å‰‡è¡¨é”å¼...)
- `d3a752e` - "å¨£è¯²å§ç‘­å´‡çª—é¨?handleParse..." (æ‡‰è©²æ˜¯ï¼šæ·»åŠ èª¿è©¦çš„ handleParse...)

## ğŸš€ å¿«é€Ÿåˆªé™¤å‘½ä»¤ï¼ˆç¤ºä¾‹ï¼‰

### åˆªé™¤ f40fc28 é€™å€‹æäº¤

```bash
# æ–¹æ³• 1: ä½¿ç”¨ rebase
git rebase -i f40fc28^
# åœ¨ç·¨è¼¯å™¨ä¸­åˆªé™¤æˆ–æ¨™è¨˜ç‚º drop

# æ–¹æ³• 2: ä½¿ç”¨ rebase --onto
git rebase --onto f40fc28^ f40fc28
```

### åˆªé™¤å¤šå€‹é€£çºŒçš„äº‚ç¢¼æäº¤

```bash
# å‡è¨­è¦åˆªé™¤ f40fc28 åˆ° 661a3e5 ä¹‹é–“çš„æ‰€æœ‰æäº¤
git rebase -i 6298cc6
# åœ¨ç·¨è¼¯å™¨ä¸­åˆªé™¤æˆ–æ¨™è¨˜ç‚º drop
```

## âš ï¸ æ³¨æ„äº‹é …

1. **å¦‚æœå·²ç¶“ push åˆ°é ç¨‹**ï¼š
   - åˆªé™¤å¾Œéœ€è¦ `git push --force`ï¼ˆè¬¹æ…ä½¿ç”¨ï¼‰
   - å»ºè­°å…ˆå‚™ä»½ï¼š`git branch backup-$(date +%Y%m%d)`

2. **å‚™ä»½ç•¶å‰ç‹€æ…‹**ï¼š
   ```bash
   git branch backup-before-delete
   ```

3. **å¦‚æœåˆªé™¤å‡ºéŒ¯**ï¼š
   ```bash
   git rebase --abort  # å–æ¶ˆ rebase
   ```

## âœ… æ¨è–¦æµç¨‹

```bash
# 1. å‚™ä»½
git branch backup-$(date +%Y%m%d)

# 2. æŸ¥çœ‹æäº¤æ­·å²
git log --oneline -10

# 3. å•Ÿå‹•äº¤äº’å¼ rebase
git rebase -i HEAD~10

# 4. åœ¨ç·¨è¼¯å™¨ä¸­åˆªé™¤æˆ–æ¨™è¨˜ç‚º drop è¦åˆªé™¤çš„æäº¤

# 5. ä¿å­˜ä¸¦é€€å‡º

# 6. å¦‚æœå·²ç¶“ pushï¼Œå¼·åˆ¶æ¨é€ï¼ˆè¬¹æ…ï¼‰
git push --force
```
